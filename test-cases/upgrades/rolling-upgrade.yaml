# TODO: need to qualify on GCE and AWS

test_duration: 220

# workloads
#write_stress_during_entire_test: cassandra-stress user profile=/tmp/cs_null_insert.yaml 'ops(insert=1)' no-warmup cl=QUORUM duration=60m -port jmx=6868 -mode cql3 native -rate threads=200
prepare_write_stress: cassandra-stress user profile=/tmp/cs_null_insert.yaml 'ops(null-insert=1)' no-warmup cl=ONE n=60000000 -port jmx=6868 -mode cql3 native -rate threads=1000
stress_cmd_read_60m: cassandra-stress user profile=/tmp/cs_null_insert.yaml 'ops(ck-select=1)' no-warmup cl=QUORUM duration=60m -port jmx=6868 -mode cql3 native -rate threads=200
verify_stress_after_cluster_upgrade: cassandra-stress user profile=/tmp/cs_null_insert.yaml 'ops(pk-select=1)' no-warmup cl=QUORUM n=60000000 -port jmx=6868 -mode cql3 native -rate threads=200

n_db_nodes: 4
n_loaders: 1
n_monitor_nodes: 1

user_prefix: 'rolling-upgrade'

server_encrypt: true
authenticator: 'PasswordAuthenticator'
authenticator_user: 'cassandra'
authenticator_password: 'cassandra'

authorization_in_upgrade: 'CassandraAuthorizer'
remove_authorization_in_rollback: true
recover_system_tables: true

append_scylla_args: '--blocked-reactor-notify-ms 500 --abort-on-lsa-bad-alloc 1 --abort-on-seastar-bad-alloc --abort-on-internal-error 1'

use_legacy_cluster_init: false

# those are needed to be give by the job, via environment variable
# for the base version
# SCT_SCYLLA_VERSION=3.0 or SCT_SCYLLA_REPO=
# for the upgrading version you need:
# SCT_NEW_SCYLLA_REPO=https://s3.amazonaws.com/downloads.scylladb.com/enterprise/rpm/unstable/centos/e438e3e3ce41f6c878b111f5c19bf2b28aa51098-2bdfa9f7ef592edaf15e028faf3b7f695f39ebc1-e616363bdc0e7a0d193a157851d7c15d952a0aad-a6b2b2355c666b1893f702a587287da978aeec22/53/scylla.repo
